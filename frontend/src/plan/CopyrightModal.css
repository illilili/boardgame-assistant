/* 폰트 import */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
@import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css');

/* --- 색상 팔레트 (CSS 변수) --- */
:root {
  --accent-primary: #E58A4E;
  --bg-main: #F9F7F5;
  --bg-card: #FFFFFF;
  --bg-card-alt: #FDFBF9; 
  --text-dark: #2c3e50;
  --text-light: #8492a6;
  --border-color: #EAEAEA;
  --risk-safe-text: #1d8a4a;
  --risk-caution-text: #d9860a;
  --risk-danger-text: #c9302c;
  --risk-safe-glow: rgba(29, 138, 74, 0.2);
  --risk-caution-glow: rgba(217, 134, 10, 0.2);
  --risk-danger-glow: rgba(201, 48, 44, 0.25);
  --info-bg: #e7f3ff;
  --info-border: #9acfea;
  --info-text: #005a9c;
  --skeleton-bg: #eff1f3;
}

/* ===== ✨ [개선] 동적 애니메이션 Keyframes 추가 ===== */
@keyframes cr-modal-fade-in { to { opacity: 1; } }
@keyframes cr-modal-scale-up { to { transform: scale(1); opacity: 1; } }
@keyframes cr-content-slide-in-left {
  from { transform: translateX(-20px); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}
@keyframes cr-content-slide-in-right {
  from { transform: translateX(20px); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}
@keyframes cr-list-item-fade-in {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}


/* ===== 기본 및 오버레이 ===== */
.cr-modal-overlay {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  background: rgba(0, 0, 0, 0.45); backdrop-filter: blur(5px);
  display: flex; align-items: center; justify-content: center;
  z-index: 2000; opacity: 0; animation: cr-modal-fade-in 0.3s forwards;
}

/* ===== 모달 컨테이너 ===== */
.cr-modal-container {
  width: 90%; max-width: 960px; height: 85vh; max-height: 700px;
  background: var(--bg-main); border-radius: 16px;
  box-shadow: 0 10px 35px rgba(0, 0, 0, 0.1);
  font-family: 'Pretendard', 'Inter', sans-serif;
  display: flex; overflow: hidden; position: relative;
  transform: scale(0.95); opacity: 0;
  animation: cr-modal-scale-up 0.4s 0.1s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
}

/* ===== 닫기 버튼 ===== */
.cr-modal-close-btn {
  position: absolute; top: 15px; right: 20px; background: none; border: none;
  font-size: 2rem; color: var(--text-light); cursor: pointer; z-index: 10;
  transition: color 0.2s ease, transform 0.2s ease;
}
.cr-modal-close-btn:hover { color: var(--text-dark); transform: rotate(90deg) scale(1.1); }

/* ===== 좌측 사이드바 ===== */
.cr-modal-sidebar {
  flex: 5; background: var(--bg-card);
  border-right: 1px solid var(--border-color);
  display: flex; flex-direction: column;
  overflow: hidden; min-width: 400px;
  /* ✨ [개선] 등장 애니메이션 추가 */
  animation: cr-content-slide-in-left 0.5s 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
  opacity: 0;
}
.cr-modal-sidebar-header {
  padding: 30px 30px 0 30px;
}
.cr-modal-sidebar-title {
  font-size: 1.8rem; font-weight: 800; color: var(--text-dark);
  margin-bottom: 2rem; padding-bottom: 1rem;
  border-bottom: 2px solid var(--border-color);
}
.cr-modal-sidebar-content {
  flex-grow: 1; overflow-y: auto; padding: 0 30px 30px 30px;
}
/* ✨ [개선] 스크롤바 디자인 */
.cr-modal-sidebar-content::-webkit-scrollbar { width: 6px; }
.cr-modal-sidebar-content::-webkit-scrollbar-track { background: transparent; }
.cr-modal-sidebar-content::-webkit-scrollbar-thumb { 
  background-color: #e0e0e0; border-radius: 3px;
  transition: background-color 0.2s;
}
.cr-modal-sidebar-content::-webkit-scrollbar-thumb:hover { background-color: var(--accent-primary); }


/* ===== 사이드바 콘텐츠 섹션 ===== */
.cr-modal-content-section {
  margin-bottom: 2.5rem;
}
.cr-modal-content-section:last-of-type {
  margin-bottom: 0;
}
.cr-modal-section-title {
  font-size: 1.2rem; font-weight: 700;
  margin-bottom: 1rem; color: var(--accent-primary);
  padding-bottom: 8px; border-bottom: 2px solid var(--accent-primary);
  display: inline-block;
}

/* ===== ✨ [개선] 종합 위험도 박스 스타일 ===== */
.cr-modal-risk-box {
  border: 1px solid var(--border-color); border-radius: 12px;
  padding: 24px; text-align: center;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.cr-modal-risk-box:hover {
  transform: translateY(-5px);
}
/* 위험도별 그라데이션 및 그림자 효과 */
.cr-modal-risk-box.cr-modal-risk-box--safe {
  background: linear-gradient(135deg, var(--bg-card-alt), #f0fff4);
  box-shadow: 0 0 20px var(--risk-safe-glow);
}
.cr-modal-risk-box.cr-modal-risk-box--caution {
  background: linear-gradient(135deg, var(--bg-card-alt), #fffaf0);
  box-shadow: 0 0 20px var(--risk-caution-glow);
}
.cr-modal-risk-box.cr-modal-risk-box--danger {
  background: linear-gradient(135deg, var(--bg-card-alt), #fff5f5);
  box-shadow: 0 0 25px var(--risk-danger-glow);
}

.cr-modal-risk-box .cr-modal-section-title {
  font-size: 1rem; font-weight: 600; color: var(--text-light);
  border-bottom: none; margin-bottom: 8px;
}
.cr-modal-risk-box .cr-modal-risk-text {
  font-size: 1.6rem; font-weight: 800;
}
.cr-modal-risk-box .cr-modal-risk-text.cr-modal-risk--safe { color: var(--risk-safe-text); }
.cr-modal-risk-box .cr-modal-risk-text.cr-modal-risk--caution { color: var(--risk-caution-text); }
.cr-modal-risk-box .cr-modal-risk-text.cr-modal-risk--danger { color: var(--risk-danger-text); }


/* 분석 요약 정보 카드 스타일 */
.cr-modal-summary-container {
  display: flex; flex-direction: column; gap: 24px;
}
.cr-modal-summary-card h4 {
  font-size: 1rem; font-weight: 600; color: var(--text-dark); margin: 0 0 12px 0;
}
.cr-modal-summary-card p {
  margin: 0; font-size: 0.95rem; color: #555; line-height: 1.7;
}
.cr-modal-summary-card ul {
  list-style: none; padding: 16px; margin: 0;
  background-color: var(--bg-card-alt);
  border: 1px solid var(--border-color);
  border-radius: 8px;
}
.cr-modal-summary-card li {
  font-size: 0.9rem; color: #555; line-height: 1.6;
  padding-left: 18px; position: relative;
}
.cr-modal-summary-card li:not(:last-child){ margin-bottom: 8px; }
.cr-modal-summary-card li::before {
  content: '•'; position: absolute; left: 0; font-size: 1.2em;
  color: var(--accent-primary);
}


/* 추천/개선사항 '알림' 스타일 */
.cr-modal-summary-alert {
  background-color: var(--info-bg); border: 1px solid var(--info-border);
  border-radius: 8px; padding: 16px; display: flex; gap: 12px;
}
.cr-modal-summary-alert .alert-icon { font-size: 1.2rem; line-height: 1.4; flex-shrink: 0; }
.cr-modal-summary-alert h4 {
  font-size: 1rem; font-weight: 600; color: var(--info-text); margin: 0 0 8px 0;
}
.cr-modal-summary-alert ul { list-style: none; padding: 0; margin: 0; }
.cr-modal-summary-alert li {
  font-size: 0.9rem; color: #333; line-height: 1.6;
  padding-left: 18px; position: relative;
}
.cr-modal-summary-alert li:not(:last-child) { margin-bottom: 8px; }
.cr-modal-summary-alert li::before {
  content: '💡'; position: absolute; left: 0;
}


/* ===== 우측 메인 콘텐츠 ===== */
.cr-modal-main { 
  flex: 6; padding: 30px; overflow-y: auto;
  /* ✨ [개선] 등장 애니메이션 추가 */
  animation: cr-content-slide-in-right 0.5s 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
  opacity: 0;
}
/* ✨ [개선] 스크롤바 디자인 */
.cr-modal-main::-webkit-scrollbar { width: 8px; }
.cr-modal-main::-webkit-scrollbar-track { background: transparent; }
.cr-modal-main::-webkit-scrollbar-thumb { 
  background-color: #dcdcdc; border-radius: 4px;
  transition: background-color 0.2s;
}
.cr-modal-main::-webkit-scrollbar-thumb:hover { background-color: var(--accent-primary); }

.cr-modal-main-title { font-size: 1.8rem; font-weight: 800; color: var(--text-dark); margin-bottom: 1.5rem; }
.cr-modal-similar-games-list { list-style: none; padding: 0; display: flex; flex-direction: column; gap: 16px; }

/* ✨ [개선] 게임 카드 순차적 등장 애니메이션 */
.cr-modal-game-card { 
  background-color: var(--bg-card); border: 1px solid var(--border-color);
  border-radius: 12px; padding: 24px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.03);
  transition: box-shadow 0.3s ease, transform 0.3s ease;
  opacity: 0;
  transform: translateY(10px);
  animation: cr-list-item-fade-in 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
}
.cr-modal-game-card:hover { transform: translateY(-5px) scale(1.01); box-shadow: 0 6px 15px rgba(0,0,0,0.08); }

.cr-modal-game-card-header { 
  display: flex; justify-content: space-between; align-items: center; 
  margin-bottom: 12px; border-bottom: 1px solid var(--border-color);
  padding-bottom: 12px; 
}

/* ✨ [개선] 외부 링크 아이콘 추가 */
.cr-modal-game-title { 
  font-size: 1.1rem; font-weight: 600; color: var(--text-dark);
  text-decoration: none; display: inline-flex; align-items: center; gap: 6px;
  transition: color 0.2s;
}
.cr-modal-game-title:hover { color: var(--accent-primary); }
.cr-modal-game-title::after {
  content: '↗'; font-size: 0.8em; opacity: 0.6;
  transition: opacity 0.2s, transform 0.2s;
}
.cr-modal-game-title:hover::after {
  opacity: 1; transform: translateX(2px) translateY(-2px);
}

/* ✨ [개선] 유사도 점수 시각화 */
.cr-modal-game-similarity { 
  font-size: 0.9rem; font-weight: 700; color: white;
  padding: 6px 14px; border-radius: 15px;
  transition: transform 0.2s;
}
.cr-modal-game-similarity:hover {
  transform: scale(1.05);
}
.cr-modal-game-similarity.high { background: linear-gradient(135deg, #e55a54, #c9302c); }
.cr-modal-game-similarity.medium { background: linear-gradient(135deg, #f0ad4e, #d9860a); }
.cr-modal-game-similarity.low { background: linear-gradient(135deg, #5bc0de, #005a9c); }


.cr-modal-overlapping-elements { list-style: none; padding-left: 5px; margin-top: 10px; font-size: 0.9rem; color: #666; }
.cr-modal-overlapping-elements li { padding-left: 18px; position: relative; margin-bottom: 5px; }
.cr-modal-overlapping-elements li::before { content: '✓'; position: absolute; left: 0; color: var(--accent-primary); font-weight: 600; }
.cr-modal-no-data { text-align: center; color: var(--text-light); padding: 40px; }

/* 로딩 스켈레톤 스타일 (변경 없음) */
@keyframes skeleton-shimmer {
  0% { background-position: -200px 0; }
  100% { background-position: calc(200px + 100%) 0; }
}
.skeleton-item {
  background-color: var(--skeleton-bg);
  border-radius: 8px;
  background-image: linear-gradient(90deg, var(--skeleton-bg), #fff, var(--skeleton-bg));
  background-size: 200px 100%;
  background-repeat: no-repeat;
  animation: skeleton-shimmer 1.5s infinite;
}

/* ===== ✨ [추가] 위험도 게이지 스타일 ===== */
.cr-modal-risk-gauge-box {
  background-color: var(--bg-card-alt);
  border: 1px solid var(--border-color);
  border-radius: 12px;
  padding: 24px;
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
  overflow: hidden;
}

.cr-modal-risk-gauge-box .cr-modal-section-title {
  margin-bottom: 0;
  border-bottom: none;
  color: var(--text-dark);
}

.cr-modal-gauge-container {
  width: 200px;
  height: 100px;
  position: relative;
  margin-top: 10px;
}

.cr-modal-gauge-bg {
  width: 100%;
  height: 100%;
  border-radius: 100px 100px 0 0;
  background: conic-gradient(from -90deg at 50% 100%, 
    var(--risk-safe-text) 0%, 
    var(--risk-caution-text) 50%, 
    var(--risk-danger-text) 100%
  );
  -webkit-mask-image: linear-gradient(to top, transparent, black), linear-gradient(to top, black, transparent);
  -webkit-mask-size: 50% 100%, 50% 100%;
  -webkit-mask-position: 0 0, 100% 0;
  -webkit-mask-repeat: no-repeat, no-repeat;
  mask-image: linear-gradient(to top, transparent, black), linear-gradient(to top, black, transparent);
  mask-size: 50% 100%, 50% 100%;
  mask-position: 0 0, 100% 0;
  mask-repeat: no-repeat, no-repeat;
  position: relative;
}

.cr-modal-gauge-bg::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 180px;
  height: 90px;
  background: var(--bg-card-alt);
  border-radius: 90px 90px 0 0;
}

@keyframes needle-swing {
  from { transform: rotate(-90deg); }
  to { transform: rotate(var(--needle-rotation, -60deg)); }
}

.cr-modal-gauge-needle {
  position: absolute;
  bottom: 5px;
  left: 50%;
  width: 2px;
  height: 80px;
  background: var(--text-dark);
  transform-origin: bottom center;
  transform: rotate(var(--needle-rotation, -60deg));
  transition: transform 1s cubic-bezier(0.23, 1, 0.32, 1);
  animation: needle-swing 1.2s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
  z-index: 2;
}
.cr-modal-gauge-needle::before {
  content: '';
  position: absolute;
  bottom: -5px;
  left: 50%;
  transform: translateX(-50%);
  width: 10px;
  height: 10px;
  background: var(--text-dark);
  border-radius: 50%;
}

.cr-modal-gauge-result {
  margin-top: -30px;
  z-index: 1;
}

.cr-modal-gauge-result .icon {
  font-size: 2.5rem;
  line-height: 1;
}

.cr-modal-gauge-result .text {
  font-size: 1.5rem;
  font-weight: 800;
  margin-top: 8px;
}

.cr-modal-gauge-result .text.risk--safe { color: var(--risk-safe-text); }
.cr-modal-gauge-result .text.risk--caution { color: var(--risk-caution-text); }
.cr-modal-gauge-result .text.risk--danger { color: var(--risk-danger-text); }

.cr-modal-gauge-description {
  font-size: 0.9rem;
  color: var(--text-light);
  margin-top: -10px;
}